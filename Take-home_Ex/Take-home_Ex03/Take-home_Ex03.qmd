---
title: "Take-home Exercise 3: Be Weatherwise or Otherwise"
date: "February 15, 2024"
date-modified: "last-modified"
execute: 
  eval: true
  warning: false
---

## Overview

The impact of climate change on weather patterns is a growing concern globally, with implications for various sectors including agriculture, infrastructure, and public health.

In this project, we aim to explore historical weather trends in Singapore using data obtained from the Meteorological Service Singapore website. By leveraging visual analytics techniques, we seek to provide insights into temperature or rainfall variations over the past four decades (1983, 1993, 2003, 2013, and 2023), with a focus on validating projections regarding temperature increases and changes in wet and dry seasons.

### Objectives

-   Analyze historical daily temperature or rainfall data from selected weather stations in Singapore.

-   Create data visualizations to illustrate trends and patterns in weather data for the specified months of the chosen years.

-   Apply interactive techniques to enhance user engagement and facilitate data exploration.

-   Validate projections regarding temperature increases and changes in wet and dry seasons as stated in the office report.

## Loading R packages

The original design will then be remade using data visualization design principles and best practices using `ggplot2`, its extensions, and `tidyverse` packages.

```{r}
pacman::p_load(cowplot, DT, dplyr, ggridges, ggiraph, ggrepel, ggthemes, gridExtra, ggplot2, gifski, gapminder, gganimate, heatmaply, hrbrthemes, haven, patchwork, plotly, patchwork, readr, tidyverse, viridis)
```

## Dataset

The original dataset ([historical daily temperature or rainfall data](http://www.weather.gov.sg/climate-historical-daily/)) was downloaded from [Meteorological Service Singapore](http://www.weather.gov.sg/home/).

Selecting the daily temperature records of December from the years 1983, 1993, 2003, 2013, and 2023, data from the Changi Meteorological Station have been chosen and downloaded for analysis.

## Data Preparation

### Data Loading and Combination

The code reads data from CSV files corresponding to December of the years 1983, 1993, 2003, 2013, and 2023, using the ISO-8859-4 and UTF-8 encoding to interpret text data from the files.

Next, the separate data frames are merged together into a single data frame called "combined".

```{r}
#| code-fold: true
#| code-summary: "Click to view the code."
#| eval: false

data1983 <- read_csv("../../data/DAILYDATA_S24_198312.csv", locale = locale(encoding = "ISO-8859-4"))
data1993 <- read_csv("../../data/DAILYDATA_S24_199312.csv", locale = locale(encoding = "ISO-8859-4"))
data2003 <- read_csv("../../data/DAILYDATA_S24_200312.csv", locale = locale(encoding = "ISO-8859-4"))
data2013 <- read_csv("../../data/DAILYDATA_S24_201312.csv", locale = locale(encoding = "ISO-8859-4"))
data2023 <- read_csv("../../data/DAILYDATA_S24_202312.csv", locale = locale(encoding = "UTF-8"))

combined <- bind_rows(data1983, data1993, data2003, data2013, data2023)
```

Because "combined" contains empty data, remove all columns containing rainfall data.

```{r}
#| code-fold: true
#| code-summary: "Click to view the code."
#| eval: false

rainfall_cols <- grep("Rainfall", names(combined))
combined <- subset(combined, select = -rainfall_cols)
```

Finally, the combined data frame is saved as an RDS file named "combined.rds" in the directory.

```{r}
#| code-fold: true
#| code-summary: "Click to view the code."
#| eval: false
 
write_rds(combined,"data/combined.rds")
```

Read the final combined file.

```{r}
combined <- read_rds("data/combined.rds")
```




